# GMAS 数据采集系统配置文件
# 版本: 2.0.0
# 更新日期: 2025-09-11

# ============ 系统配置 ============
system:
  current_path: .  # 使用 . 代替 null，避免空值错误
  workspace: '{platform.workspace}'  # 引用平台特定工作空间路径

# ============ 资源文件配置 ============
resources:
  icon_file: Layer0_Symbol_Square.png
  map_project_folder: Finished observation points of Group3
  sheet_names_lut: 100K_sheet_names_271_name_V3_after_GEOSA_edit.xlsx

# ============ 文件路径配置 ============
file_paths:
  icon_file: resource/render_src/{resources.icon_file}
  kml_schema_22: resource/kml_xsd/220/ogckml22.xsd
  kml_schema_23: resource/kml_xsd/230/ogckml23.xsd
  sheet_names_file: resource/private/{resources.sheet_names_lut}

# ============ 平台特定配置 ============
platform:
  # 工作空间路径配置（平台特定）
  workspace:
    windows: D:/RouteDesign
    macos: /Users/kai/RouteDesign
    linux: /home/kai/RouteDesign
    default: ./workspace  # 默认相对路径，作为备选方案
  
  # 微信文件夹配置
  wechat_folders:
    macos: ''
    windows: D:/Users/lenovo/Documents/xwechat_files/bringsmile_b74d/msg/file  # 保留硬编码
    linux: ''
    default: ''

# ============ 日志配置 ============
logging:
  # 基础日志配置
  level: INFO
  console_level: INFO
  file_level: DEBUG
  log_dir: ./logs
  log_file: gmas_collection.log
  max_bytes: 5242880  # 5MB
  backup_count: 3
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  date_format: '%Y-%m-%d %H:%M:%S'
  
  # 邮件通知配置（保留但默认禁用）
  email:
    enabled: false
    fromaddr: your_email@example.com
    mailhost: smtp.example.com
    password: your_password
    port: 587
    subject: GMAS Application Error
    toaddrs:
    - recipient@example.com
    username: your_email@example.com

# ============ 数据采集配置 ============
data_collection:
  weekdays: [5]  # 采集日期（周六），删除重复的 collection_weekdays
  traceback_date: '2025-07-10'  # 统一为 ISO 格式
  traceback_days: 60
  traceforward_days: 7

# ============ 地图图幅配置 ============
mapsheet:
  sequence_min: 41  # 最小序号
  sequence_max: 51  # 最大序号

# ============ 模糊匹配配置 ============
fuzzy_matching:
  enabled: true
  threshold: 0.65
  debug: false

# ============ 监控配置 ============
monitoring:
  # 删除重复的模糊匹配配置，统一在 fuzzy_matching 部分
  end_time:
    hour: 20
    minute: 30
    second: 0
  status_interval_minutes: 30
  time_interval_seconds: 10

# ============ 报告配置 ============
reports:
  # Excel 报告配置
  excel:
    filename_template: '{date}_Daily_Statistics.xlsx'
    output_directory: '{workspace}/{year}{month}/{date}'  # 统一使用 /
  
  # KMZ 报告配置
  kmz:
    filename_template: GMAS_Points_and_tracks_until_{date}.kmz
    output_directory: '{workspace}/{year}{month}/{date}'  # 统一使用 /
  
  # 统计配置
  statistics:
    backup_directory: '{workspace}/backup'  # 统一使用 /
    daily_details_file: '{workspace}/{daily_details_file_name}'  # 统一使用 /
    daily_details_file_name: Daily_statistics_details_for_Group_3.2.xlsx

# ============ 进度估算配置 ============
progress_estimation:
  # 图表配置
  charts:
    chart_style: professional
    chart_types:
    - burndown
    - burnup
    - velocity
    - cumulative
    color_scheme: professional
    dpi: 300
    enable_charts: true
    figsize:
    - 12
    - 8
  
  # 数据源配置
  data_source:
    date_column: 观测日期
    excel_file_path: '{reports.statistics.daily_details_file}'
    fallback_to_mock: true
    mapsheet_column: 图幅号
    points_column: 每日点数
    sheet_name: 观测数据
  
  # 估算方法配置
  estimation_methods:
    confidence_levels:
    - 0.5
    - 0.8
    - 0.9
    - 0.95
    enable_exponential_smoothing: true
    enable_linear_regression: true
    enable_monte_carlo: true
    enable_simple_average: true
    enable_weighted_average: true
    monte_carlo_iterations: 10000
  
  # 输出配置
  output:
    compress_output: false
    formats:
    - json
    - excel
    - pdf
    include_charts: true
    include_raw_data: false
    output_dir: estimation_output
  
  # 性能配置
  performance:
    batch_size: 50
    cache_enabled: true
    cache_ttl_hours: 24
    max_workers: 4
    timeout_seconds: 300  # 5分钟超时
